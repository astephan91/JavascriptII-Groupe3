{"version":3,"sources":["meteor://ðŸ’»app/imports/ui/body.js","meteor://ðŸ’»app/imports/api/chansons.js","meteor://ðŸ’»app/client/main.js"],"names":["Template","module","watch","require","v","Meteor","Chansons","body","helpers","chansons","find","sort","score","events","event","preventDefault","target","URL","value","indexOf","alert","videoID","split","insert","titre","chanson","update","_id","$set","isClient","onYouTubeIframeAPIReady","player","YT","Player","videoId","onReady","playVideo","load","export","Mongo","Collection"],"mappings":"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","file":"/app.js","sourcesContent":["//Importation des mÃ©thodes\nimport { Template } from 'meteor/templating';\nimport { Meteor } from 'meteor/meteor';\nimport { Chansons } from '../api/chansons.js'\n\n//Importation de body\nimport './body.html';\n//Importation des templates\nimport './templates/header.html';\nimport './templates/youTube.html';\nimport './templates/search.html';\nimport './templates/parametres.html';\nimport './templates/chanson.html';\nimport './templates/spreadsheet.html';\n\n\n\nTemplate.body.helpers({\n  chansons(){\n    // Classement en fonction du score\n    return Chansons.find({}, { sort: { score: -1 } });\n    \n  }\n});\n\nTemplate.body.events({\n  'submit .nouvelleChanson'(event) {\n    // On empÃªche le comportement par dÃ©faut\n    event.preventDefault();\n \n    // RÃ©cupÃ©ration des informations\n    const target = event.target;\n    const URL = target.URL.value;\n\n    //VÃ©rification de la validitÃ© de l'URL\n    if(URL.indexOf(\"youtube.com\") == -1 && URL.indexOf(\"youtu.be\") == -1){\n      alert(\"Merci de rentrer une URL YouTube valide\");\n      return;\n    };\n    const videoID = URL.split(\"v=\")[1];\n \n    // Insertion d'une chanson de score nul dans la collection\n    Chansons.insert({\n      URL,\n      videoID,\n      score: 0,\n    });\n \n    // On vide la forme\n    target.URL.value = \"\";\n    target.titre.value= \"\";\n  },\n});\n\nTemplate.chanson.events({\n  //Augmentation du score\n  'click .pos'(event) {\n    // On empÃªche le comportement par dÃ©faut\n    event.preventDefault();\n\n    //Et on update le score\n    Chansons.update(this._id, {\n      $set: {\"score\": this.score +1},\n    });\n  },\n\n  //Diminution du score\n  'click .neg'(event) {\n    //On empÃªche le comportement par dÃ©faut\n    event.preventDefault();\n\n    //Et on update le score\n    Chansons.update(this._id, {\n      $set: {\"score\": this.score -1},\n    });\n  },\n});\n\n//Lancement de YouTube\n\nif (Meteor.isClient) {\n\n  onYouTubeIframeAPIReady = function() {\n    player = new YT.Player(\"player\", {\n      videoId: \"fkk1vg0nAfc\",\n      events: {\n        onReady: function (event) {\n          event.target.playVideo();\n        }\n      }\n    });\n  };\n\n  YT.load();\n};\n","import { Mongo } from 'meteor/mongo';\n\nexport const Chansons = new Mongo.Collection('chansons');\n","import '../imports/ui/body.js';\n"]}