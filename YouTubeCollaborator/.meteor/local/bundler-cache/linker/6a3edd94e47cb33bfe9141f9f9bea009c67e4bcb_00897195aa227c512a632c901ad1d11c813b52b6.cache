[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nYT = Package['adrianliaw:youtube-iframe-api'].YT;\nYTConfig = Package['adrianliaw:youtube-iframe-api'].YTConfig;\nRoles = Package['alanning:roles'].Roles;\nFlowRouter = Package['kadira:flow-router'].FlowRouter;\nAccounts = Package['accounts-base'].Accounts;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package['templating-runtime'].Template;\nmeteorInstall = Package.modules.meteorInstall;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nAccountsTemplates = Package['useraccounts:core'].AccountsTemplates;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\nSymbol = Package['ecmascript-runtime-client'].Symbol;\nMap = Package['ecmascript-runtime-client'].Map;\nSet = Package['ecmascript-runtime-client'].Set;\nT9n = Package['softwarerero:accounts-t9n'].T9n;\n\n","servePath":"/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"imports\":{\"ui\":{\"templates\":{\"chanson.html\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/chanson.html                                                                                 //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.watch(require(\"./template.chanson.js\"), {\n  \"*\": module.makeNsSetter(true)\n});\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.chanson.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/template.chanson.js                                                                          //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\n\nTemplate.__checkName(\"chanson\");\nTemplate[\"chanson\"] = new Template(\"Template.chanson\", (function() {\n  var view = this;\n  return HTML.LI({\n    class: \"elementLi\"\n  }, \"\\n        \", Blaze.View(\"lookup:URL\", function() {\n    return Spacebars.mustache(view.lookup(\"URL\"));\n  }), HTML.Raw(' <input type=\"button\" class=\"pos\" value=\"+\"> <input type=\"button\" class=\"neg\" value=\"-\">\\n      '));\n}));\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"header.html\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/header.html                                                                                  //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.watch(require(\"./template.header.js\"), {\n  \"*\": module.makeNsSetter(true)\n});\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.header.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/template.header.js                                                                           //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\n\nTemplate.__checkName(\"header\");\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {\n  var view = this;\n  return HTML.Raw('<div id=\"header\">\\n    <h2>\\n      Nom de la salle : Soirée truc\\n    </h2>\\n  </div>');\n}));\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"parametres.html\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/parametres.html                                                                              //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.watch(require(\"./template.parametres.js\"), {\n  \"*\": module.makeNsSetter(true)\n});\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.parametres.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/template.parametres.js                                                                       //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\n\nTemplate.__checkName(\"parametres\");\nTemplate[\"parametres\"] = new Template(\"Template.parametres\", (function() {\n  var view = this;\n  return HTML.Raw('<div id=\"parametres\">\\n    <h3>\\n      <a href=\"\">Paramètres</a>\\n    </h3>\\n  </div>');\n}));\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"search.html\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/search.html                                                                                  //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.watch(require(\"./template.search.js\"), {\n  \"*\": module.makeNsSetter(true)\n});\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.search.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/template.search.js                                                                           //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\n\nTemplate.__checkName(\"search\");\nTemplate[\"search\"] = new Template(\"Template.search\", (function() {\n  var view = this;\n  return HTML.Raw('<form class=\"nouvelleChanson\">\\n  <input type=\"text\" name=\"URL\" placeholder=\"Adresse YouTube\">\\n</form>');\n}));\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"youTube.html\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/youTube.html                                                                                 //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.watch(require(\"./template.youTube.js\"), {\n  \"*\": module.makeNsSetter(true)\n});\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.youTube.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/templates/template.youTube.js                                                                          //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\n\nTemplate.__checkName(\"youTube\");\nTemplate[\"youTube\"] = new Template(\"Template.youTube\", (function() {\n  var view = this;\n  return HTML.Raw('<div id=\"player\"></div>');\n}));\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"body.html\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/body.html                                                                                              //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.watch(require(\"./template.body.js\"), {\n  \"*\": module.makeNsSetter(true)\n});\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.body.js\":function(){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/template.body.js                                                                                       //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\n\nTemplate.body.addContent((function() {\n  var view = this;\n  return [ HTML.SCRIPT({\n    type: \"text/javascript\",\n    src: \"https://gdata.youtube.com/feeds/api/videos/videoid?v=2&alt=json-in-script&format=5&callback=getTitle\"\n  }, \"\\n    \"), \"\\n\\n\", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n\\n\", Spacebars.include(view.lookupTemplate(\"youTube\")), \"\\n\\n\", Spacebars.include(view.lookupTemplate(\"search\")), \"\\n\\n\", Spacebars.include(view.lookupTemplate(\"TemplateOri\")), \"\\n\\n\\n\\n\", HTML.UL({\n    id: \"affichagePlaylist\"\n  }, \"\\n  \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"chansons\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"chanson\")), \"\\n  \" ];\n  }), \"\\n\"), \"\\n\\n\", Spacebars.include(view.lookupTemplate(\"parametres\")) ];\n}));\nMeteor.startup(Template.body.renderToDocument);\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"body.js\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/ui/body.js                                                                                                //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nvar Template;\nmodule.watch(require(\"meteor/templating\"), {\n  Template: function (v) {\n    Template = v;\n  }\n}, 0);\nvar Meteor;\nmodule.watch(require(\"meteor/meteor\"), {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 1);\nvar Chansons;\nmodule.watch(require(\"../api/chansons.js\"), {\n  Chansons: function (v) {\n    Chansons = v;\n  }\n}, 2);\nmodule.watch(require(\"./body.html\"));\nmodule.watch(require(\"./templates/header.html\"));\nmodule.watch(require(\"./templates/youTube.html\"));\nmodule.watch(require(\"./templates/search.html\"));\nmodule.watch(require(\"./templates/parametres.html\"));\nmodule.watch(require(\"./templates/chanson.html\"));\nmodule.watch(require(\"./templates/spreadsheet.html\"));\nTemplate.body.helpers({\n  chansons: function () {\n    // Classement en fonction du score\n    return Chansons.find({}, {\n      sort: {\n        score: -1\n      }\n    });\n  }\n});\nTemplate.body.events({\n  'submit .nouvelleChanson': function (event) {\n    // On empêche le comportement par défaut\n    event.preventDefault(); // Récupération des informations\n\n    var target = event.target;\n    var URL = target.URL.value; //Vérification de la validité de l'URL\n\n    if (URL.indexOf(\"youtube.com\") == -1 && URL.indexOf(\"youtu.be\") == -1) {\n      alert(\"Merci de rentrer une URL YouTube valide\");\n      return;\n    }\n\n    ;\n    var videoID = URL.split(\"v=\")[1]; // Insertion d'une chanson de score nul dans la collection\n\n    Chansons.insert({\n      URL: URL,\n      videoID: videoID,\n      score: 0\n    }); // On vide la forme\n\n    target.URL.value = \"\";\n    target.titre.value = \"\";\n  }\n});\nTemplate.chanson.events({\n  //Augmentation du score\n  'click .pos': function (event) {\n    // On empêche le comportement par défaut\n    event.preventDefault(); //Et on update le score\n\n    Chansons.update(this._id, {\n      $set: {\n        \"score\": this.score + 1\n      }\n    });\n  },\n  //Diminution du score\n  'click .neg': function (event) {\n    //On empêche le comportement par défaut\n    event.preventDefault(); //Et on update le score\n\n    Chansons.update(this._id, {\n      $set: {\n        \"score\": this.score - 1\n      }\n    });\n  }\n}); //Lancement de YouTube\n\nif (Meteor.isClient) {\n  onYouTubeIframeAPIReady = function () {\n    player = new YT.Player(\"player\", {\n      videoId: \"fkk1vg0nAfc\",\n      events: {\n        onReady: function (event) {\n          event.target.playVideo();\n        }\n      }\n    });\n  };\n\n  YT.load();\n}\n\n;\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"api\":{\"chansons.js\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// imports/api/chansons.js                                                                                           //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.export({\n  Chansons: function () {\n    return Chansons;\n  }\n});\nvar Mongo;\nmodule.watch(require(\"meteor/mongo\"), {\n  Mongo: function (v) {\n    Mongo = v;\n  }\n}, 0);\nvar Chansons = new Mongo.Collection('chansons');\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},\"client\":{\"main.js\":function(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// client/main.js                                                                                                    //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\nmodule.watch(require(\"../imports/ui/body.js\"));\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\",\n    \".html\",\n    \".css\"\n  ]\n});\nrequire(\"/client/main.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["imports/ui/body.js","imports/api/chansons.js","client/main.js"],"names":["Template","module","watch","require","v","Meteor","Chansons","body","helpers","chansons","find","sort","score","events","event","preventDefault","target","URL","value","indexOf","alert","videoID","split","insert","titre","chanson","update","_id","$set","isClient","onYouTubeIframeAPIReady","player","YT","Player","videoId","onReady","playVideo","load","export","Mongo","Collection"],"mappings":"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","file":"/app.js","sourcesContent":["//Importation des méthodes\nimport { Template } from 'meteor/templating';\nimport { Meteor } from 'meteor/meteor';\nimport { Chansons } from '../api/chansons.js'\n\n//Importation de body\nimport './body.html';\n//Importation des templates\nimport './templates/header.html';\nimport './templates/youTube.html';\nimport './templates/search.html';\nimport './templates/parametres.html';\nimport './templates/chanson.html';\nimport './templates/spreadsheet.html';\n\n\n\nTemplate.body.helpers({\n  chansons(){\n    // Classement en fonction du score\n    return Chansons.find({}, { sort: { score: -1 } });\n    \n  }\n});\n\nTemplate.body.events({\n  'submit .nouvelleChanson'(event) {\n    // On empêche le comportement par défaut\n    event.preventDefault();\n \n    // Récupération des informations\n    const target = event.target;\n    const URL = target.URL.value;\n\n    //Vérification de la validité de l'URL\n    if(URL.indexOf(\"youtube.com\") == -1 && URL.indexOf(\"youtu.be\") == -1){\n      alert(\"Merci de rentrer une URL YouTube valide\");\n      return;\n    };\n    const videoID = URL.split(\"v=\")[1];\n \n    // Insertion d'une chanson de score nul dans la collection\n    Chansons.insert({\n      URL,\n      videoID,\n      score: 0,\n    });\n \n    // On vide la forme\n    target.URL.value = \"\";\n    target.titre.value= \"\";\n  },\n});\n\nTemplate.chanson.events({\n  //Augmentation du score\n  'click .pos'(event) {\n    // On empêche le comportement par défaut\n    event.preventDefault();\n\n    //Et on update le score\n    Chansons.update(this._id, {\n      $set: {\"score\": this.score +1},\n    });\n  },\n\n  //Diminution du score\n  'click .neg'(event) {\n    //On empêche le comportement par défaut\n    event.preventDefault();\n\n    //Et on update le score\n    Chansons.update(this._id, {\n      $set: {\"score\": this.score -1},\n    });\n  },\n});\n\n//Lancement de YouTube\n\nif (Meteor.isClient) {\n\n  onYouTubeIframeAPIReady = function() {\n    player = new YT.Player(\"player\", {\n      videoId: \"fkk1vg0nAfc\",\n      events: {\n        onReady: function (event) {\n          event.target.playVideo();\n        }\n      }\n    });\n  };\n\n  YT.load();\n};\n","import { Mongo } from 'meteor/mongo';\n\nexport const Chansons = new Mongo.Collection('chansons');\n","import '../imports/ui/body.js';\n"]}}]